<nav class="breadcrumb">
  <a class="breadcrumb-item" href="javascript://" routerLink="/admin">หน้าหลัก</a>
  <a class="breadcrumb-item" href="javascript://" routerLink="/admin/transfer-dashboard">เวชภัณฑ์ถึงจุดเบิก</a>
  <span class="breadcrumb-item active">เติมเวชภัณฑ์ (แยกตามรายการเวชภัณฑ์)</span>
</nav>

<div class="row">
  <div class="col-md-4">
    <h4 style="margin-bottom: 10px;" class="h4">Working Code: {{workingCode}}</h4>
  </div>
  <div class="col-md-8">
    <h4 style="margin-bottom: 10px;" class="h4">ชื่อเวชภัณฑ์: {{genericName}}</h4>
  </div>
</div>

<clr-datagrid [style.height.%]="85">
  <clr-dg-column [clrDgField]="'dst_warehouse_name'">คลัง/หน่วยเบิก</clr-dg-column>
  <clr-dg-column>Min Qty.</clr-dg-column>
  <clr-dg-column>Max Qty.</clr-dg-column>
  <clr-dg-column>คงเหลือ</clr-dg-column>
  <!-- <clr-dg-column>ยอดเติม</clr-dg-column> -->
  <clr-dg-column>หน่วย</clr-dg-column>
  <clr-dg-placeholder>ไม่พบรายการ</clr-dg-placeholder>
  <clr-dg-row *clrDgItems="let g of generics; let idx = index;">
    <clr-dg-cell>{{g.dst_warehouse_name}}</clr-dg-cell>
    <clr-dg-cell style="text-align: right;">{{g.dst_min_qty | number}}</clr-dg-cell>
    <clr-dg-cell style="text-align: right;">{{g.dst_max_qty | number}}</clr-dg-cell>
    <clr-dg-cell style="text-align: right;">{{g.dst_remain_qty | number}}</clr-dg-cell>
    <!-- <clr-dg-cell style="text-align: right;">{{g.total_transfer_qty | number}}</clr-dg-cell> -->
    <clr-dg-cell style="text-align: center;">{{g.unit_name}}</clr-dg-cell>
    <wm-transfer-product-detail [generic]="g" (onChangeQty)="changeQty(idx, $event)" (onChangeUnit)="changeUnit(idx, $event)"
      *clrIfExpanded ngProjectAs="clr-dg-row-detail"></wm-transfer-product-detail>
  </clr-dg-row>
  <clr-dg-footer>
    {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}} จาก {{pagination.totalItems}} รายการ
    <clr-dg-pagination #pagination [clrDgPageSize]="perPage" [clrDgTotalItems]="generics.length"></clr-dg-pagination>
  </clr-dg-footer>
</clr-datagrid>

<button class="btn btn-sm btn-success" (click)="save()">
  บันทึกข้อมูล
</button>

<button class="btn btn-sm btn-danger" routerLink="/admin/transfer-dashboard">
  กลับหน้าหลัก
</button>

<wm-loading-modal #modalLoading></wm-loading-modal>